<div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
    <div>
        <h2 style="margin: 0 0 10px;">{{ "Content Gaps (Zero-Hit Clusters)"|t('search-manager') }}</h2>
        <p class="light" style="margin: 0;">
            {{ "These groups of queries returned no hits. This indicates missing content or topics your users are looking for."|t('search-manager') }}
        </p>
    </div>
    <div class="btngroup">
        <button type="button" class="btn menubtn" data-icon="download">{{ "Export"|t('search-manager') }}</button>
        <div class="menu" data-align="right">
            <ul>
                <li><a href="#" class="tab-export" data-action="search-manager/analytics/export-content-gaps" data-format="csv" data-params='{"type":"clusters"}'>{{ "Clusters (CSV)"|t('search-manager') }}</a></li>
                <li><a href="#" class="tab-export" data-action="search-manager/analytics/export-content-gaps" data-format="json" data-params='{"type":"clusters"}'>{{ "Clusters (JSON)"|t('search-manager') }}</a></li>
                <li><hr></li>
                <li><a href="#" class="tab-export" data-action="search-manager/analytics/export-content-gaps" data-format="csv" data-params='{"type":"recent"}'>{{ "Recent Zero-Hits (CSV)"|t('search-manager') }}</a></li>
                <li><a href="#" class="tab-export" data-action="search-manager/analytics/export-content-gaps" data-format="json" data-params='{"type":"recent"}'>{{ "Recent Zero-Hits (JSON)"|t('search-manager') }}</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="analytics-charts">
    <div class="chart-container full-width">
        <div class="table-scroll-container">
            <table class="data fullwidth">
                <thead>
                    <tr>
                        <th>{{ 'Main Term'|t('search-manager') }}</th>
                        <th>{{ 'Total Searches'|t('search-manager') }}</th>
                        <th>{{ 'Related Queries'|t('search-manager') }}</th>
                        <th>{{ 'Last Searched'|t('search-manager') }}</th>
                    </tr>
                </thead>
                <tbody id="content-gaps-body">
                    {# Populated via JS #}
                    <tr><td colspan="4" class="thin light">{{ "Loading content gaps..."|t('search-manager') }}</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<h2 style="margin: 30px 0 20px;">{{ "Recent Zero-Hit Queries"|t('search-manager') }}</h2>

<div class="analytics-charts">
    <div class="chart-container full-width">
        <div class="table-scroll-container">
            <table class="data fullwidth">
                <thead>
                    <tr>
                        <th>{{ 'Query'|t('search-manager') }}</th>
                        <th>{{ 'Site'|t('search-manager') }}</th>
                        <th>{{ 'Index'|t('search-manager') }}</th>
                        <th>{{ 'Backend'|t('search-manager') }}</th>
                        <th>{{ 'Date'|t('search-manager') }}</th>
                        <th>{{ 'Time'|t('search-manager') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in recentUnhandled %}
                        <tr>
                            <td><code>{{ stat.query }}</code></td>
                            <td>
                                {% if stat.siteId %}
                                    {% set site = craft.app.sites.getSiteById(stat.siteId) %}
                                    {{ site ? site.name : '—' }}
                                {% else %}
                                    —
                                {% endif %}
                            </td>
                            <td>{{ stat.indexHandle }}</td>
                            <td>{{ stat.backend|title }}</td>
                            <td>{{ stat.dateCreated|date('short') }}</td>
                            <td>{{ stat.dateCreated|time('short') }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="6" class="thin light">{{ "All searches have hits!"|t('search-manager') }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
