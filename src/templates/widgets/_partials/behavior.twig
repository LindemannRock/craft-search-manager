{% import "_includes/forms" as forms %}

{# Backdrop Settings #}
<h2>{{ "Backdrop Settings"|t('search-manager') }}</h2>

{{ forms.textField({
	label: 'Opacity'|t('search-manager'),
	instructions: 'Opacity of the dark overlay behind the modal (0 = transparent, 100 = opaque)'|t('search-manager'),
	id: 'backdrop-opacity',
	name: 'settings[backdrop][opacity]',
	value: widgetConfig.getBackdropOpacity(),
	type: 'number',
	min: 0,
	max: 100,
}) }}

{{ forms.lightswitchField({
	label: 'Enable Backdrop Blur'|t('search-manager'),
	instructions: 'Apply a blur effect to the page content behind the modal'|t('search-manager'),
	id: 'backdrop-blur',
	name: 'settings[backdrop][blur]',
	on: widgetConfig.isBackdropBlurEnabled(),
}) }}

<hr>

{# Behavior Settings #}
<h2>{{ "Behavior Settings"|t('search-manager') }}</h2>

{{ forms.lightswitchField({
	label: 'Prevent Body Scroll'|t('search-manager'),
	instructions: 'Prevent the page from scrolling when the search modal is open'|t('search-manager'),
	id: 'behavior-preventBodyScroll',
	name: 'settings[behavior][preventBodyScroll]',
	on: widgetConfig.isPreventBodyScrollEnabled(),
}) }}

{{ forms.textField({
	label: 'Debounce'|t('search-manager'),
	instructions: 'Delay in milliseconds before search triggers after typing'|t('search-manager'),
	id: 'behavior-debounce',
	name: 'settings[behavior][debounce]',
	value: widgetConfig.getDebounce(),
	type: 'number',
	min: 0,
	max: 2000,
}) }}

{{ forms.textField({
	label: 'Minimum Characters'|t('search-manager'),
	instructions: 'Minimum characters before search begins'|t('search-manager'),
	id: 'behavior-minChars',
	name: 'settings[behavior][minChars]',
	value: widgetConfig.getMinChars(),
	type: 'number',
	min: 1,
	max: 10,
}) }}

{{ forms.textField({
	label: 'Maximum Results'|t('search-manager'),
	instructions: 'Maximum number of results to display'|t('search-manager'),
	id: 'behavior-maxResults',
	name: 'settings[behavior][maxResults]',
	value: widgetConfig.getMaxResults(),
	type: 'number',
	min: 1,
	max: 100,
}) }}

{{ forms.lightswitchField({
	label: 'Show Recent Searches'|t('search-manager'),
	instructions: 'Show recently searched terms when the modal opens'|t('search-manager'),
	id: 'behavior-showRecent',
	name: 'settings[behavior][showRecent]',
	on: widgetConfig.isShowRecentEnabled(),
	toggle: 'max-recent-searches-field',
}) }}

<div id="max-recent-searches-field"{% if not widgetConfig.isShowRecentEnabled() %} class="hidden"{% endif %}>
	{{ forms.textField({
		label: 'Max Recent Searches'|t('search-manager'),
		instructions: 'Maximum number of recent searches to store and display'|t('search-manager'),
		id: 'behavior-maxRecentSearches',
		name: 'settings[behavior][maxRecentSearches]',
		value: widgetConfig.getMaxRecentSearches(),
		type: 'number',
		min: 1,
		max: 50,
	}) }}
</div>

{{ forms.lightswitchField({
	label: 'Group Results'|t('search-manager'),
	instructions: 'Group search results by type/section'|t('search-manager'),
	id: 'behavior-groupResults',
	name: 'settings[behavior][groupResults]',
	on: widgetConfig.isGroupResultsEnabled(),
}) }}

{{ forms.textField({
	label: 'Hotkey'|t('search-manager'),
	instructions: 'Keyboard shortcut key (used with Cmd/Ctrl, e.g., "k" for Cmd+K)'|t('search-manager'),
	id: 'behavior-hotkey',
	name: 'settings[behavior][hotkey]',
	value: widgetConfig.getHotkey(),
	size: 1,
	maxlength: 1,
}) }}

{{ forms.lightswitchField({
	label: 'Hide Results Without URL'|t('search-manager'),
	instructions: 'Hide search results that do not have a URL (e.g., entries without landing pages)'|t('search-manager'),
	id: 'behavior-hideResultsWithoutUrl',
	name: 'settings[behavior][hideResultsWithoutUrl]',
	on: widgetConfig.isHideResultsWithoutUrlEnabled(),
}) }}

{{ forms.lightswitchField({
	label: 'Show Loading Indicator'|t('search-manager'),
	instructions: 'Display a spinner while search results are loading'|t('search-manager'),
	id: 'behavior-showLoadingIndicator',
	name: 'settings[behavior][showLoadingIndicator]',
	on: widgetConfig.isShowLoadingIndicatorEnabled(),
}) }}

<hr>

{# Trigger Button Settings #}
<h2>{{ "Trigger Button Settings"|t('search-manager') }}</h2>

{{ forms.lightswitchField({
	label: 'Show Trigger Button'|t('search-manager'),
	instructions: 'Display a visible search button that opens the modal'|t('search-manager'),
	id: 'trigger-showTrigger',
	name: 'settings[trigger][showTrigger]',
	on: widgetConfig.isShowTriggerEnabled(),
	toggle: 'trigger-text-field',
}) }}

<div id="trigger-text-field"{% if not widgetConfig.isShowTriggerEnabled() %} class="hidden"{% endif %}>
	{{ forms.textField({
		label: 'Trigger Text'|t('search-manager'),
		instructions: 'Text displayed on the trigger button'|t('search-manager'),
		id: 'trigger-triggerText',
		name: 'settings[trigger][triggerText]',
		value: widgetConfig.getTriggerText(),
	}) }}
</div>

<hr>

{# Analytics Settings #}
<h2>{{ "Analytics Settings"|t('search-manager') }}</h2>

{{ forms.textField({
	label: 'Source Identifier'|t('search-manager'),
	instructions: 'Custom identifier for this widget in analytics (e.g., "header-search", "mobile-nav"). Leave empty for default.'|t('search-manager'),
	id: 'analytics-source',
	name: 'settings[analytics][source]',
	value: widgetConfig.getAnalyticsSource(),
	placeholder: 'frontend-widget',
}) }}

{{ forms.textField({
	label: 'Idle Timeout'|t('search-manager'),
	instructions: 'Track search after user stops typing for this duration (milliseconds). Set to 0 to disable idle tracking.'|t('search-manager'),
	id: 'analytics-idleTimeout',
	name: 'settings[analytics][idleTimeout]',
	value: widgetConfig.getIdleTimeout(),
	type: 'number',
	min: 0,
	max: 10000,
}) }}
